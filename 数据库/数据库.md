**1.什么是SQL**

    结构化查询语言(Structured Query Language)简称SQL，是一种数据库查询语言。

    作用：用于存取数据、查询、更新和管理关系数据库系统。


**2.数据库的三大范式是什么**

    第一范式：每个列都不可以再拆分。

    第二范式：在第一范式的基础上，非主键列完全依赖于主键，而不能是依赖于主键的一部分。

    第三范式：在第二范式的基础上，非主键列只依赖于主键，不依赖于其他非主键。

    在设计数据库结构的时候，要尽量遵守三范式，如果不遵守，必须有足够的理由。比如性能。事实上我们经常会为了性能而妥协数据库的设计。


**3.mysql有关权限的表都有哪几个**

    MySQL服务器通过权限表来控制用户对数据库的访问，权限表存放在mysql数据库里，由mysql_install_db脚本初始化。这些权限表分别user，db，table_priv，columns_priv和host。下面分别介绍一下这些表的结构和内容：

        user权限表：记录允许连接到服务器的用户帐号信息，里面的权限是全局级的。
        db权限表：记录各个帐号在各个数据库上的操作权限。
        table_priv权限表：记录数据表级的操作权限。
        columns_priv权限表：记录数据列级的操作权限。
        host权限表：配合db权限表对给定主机上数据库级操作权限作更细致的控制。这个权限表不受GRANT和REVOKE语句的影响。


**4.mysql有哪些数据类型**

    4.1 整数类型 
        包括TINYINT、SMALLINT、MEDIUMINT、INT、BIGINT，分别表示1字节、2字节、3字节、4字节、8字节整数。任何整数类型都可以加上UNSIGNED属性，表示数据是无符号的，即非负整数。

        长度：整数类型可以被指定长度，例如：INT(11)表示长度为11的INT类型。长度在大多数场景是没有意义的，它不会限制值的合法范围，只会影响显示字符的个数，而且需要和UNSIGNED ZEROFILL属性配合使用才有意义。

        例子：假定类型设定为INT(5)，属性为UNSIGNED ZEROFILL，如果用户插入的数据为12的话，那么数据库实际存储数据为00012

    4.2 实数类型
        包括FLOAT、DOUBLE、DECIMAL。DECIMAL可以用于存储比BIGINT还大的整型，能存储精确的小数。而FLOAT和DOUBLE是有取值范围的，并支持使用标准的浮点进行近似计算。 计算时FLOAT和DOUBLE相比DECIMAL效率更高一些，DECIMAL你可以理解成是用字符串进行处理。

    4.3 字符串类型
        包括VARCHAR、CHAR、TEXT、BLOB
        VARCHAR用于存储可变长字符串，它比定长类型更节省空间。
        VARCHAR使用额外1或2个字节存储字符串长度。列长度小于255字节时，使用1字节表示，否则使用2字节表示。
        VARCHAR存储的内容超出设置的长度时，内容会被截断。
        CHAR是定长的，根据定义的字符串长度分配足够的空间。
        CHAR会根据需要使用空格进行填充方便比较。
        CHAR适合存储很短的字符串，或者所有值都接近同一个长度。
        CHAR存储的内容超出设置的长度时，内容同样会被截断。

        对于经常变更的数据来说，CHAR比VARCHAR更好，因为CHAR不容易产生碎片。
        对于非常短的列，CHAR比VARCHAR在存储空间上更有效率。
        使用时要注意只分配需要的空间，更长的列排序时会消耗更多内存。
        尽量避免使用TEXT/BLOB类型，查询时会使用临时表，导致严重的性能开销。

    4.4 枚举类型（ENUM）
        把不重复的数据存储为一个预定义的集合。
        有时可以使用ENUM代替常用的字符串类型。
        ENUM存储非常紧凑，会把列表值压缩到一个或两个字节。
        ENUM在内部存储时，其实存的是整数。
        尽量避免使用数字作为ENUM枚举的常量，因为容易混乱。
        排序是按照内部存储的整数

    4.5 日期和时间类型
        尽量使用timestamp，空间效率高于datetime，
        用整数保存时间戳通常不方便处理。
        如果需要存储微妙，可以使用bigint存储。
        看到这里，这道真题是不是就比较容易回答了。


**5.什么是索引**

    索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它们包含着对数据表里所有记录的引用指针。

    索引是一种数据结构。数据库索引，是数据库管理系统中一个排序的数据结构，以协助快速查询、更新数据库表中数据。索引的实现通常使用B树及其变种B+树。

    更通俗的说，索引就相当于目录。为了方便查找书中的内容，通过对内容建立索引形成目录。索引是一个文件，它是要占据物理空间的。


**6.索引有哪些优缺点？**

    索引的优点
        可以大大加快数据的检索速度，这也是创建索引的最主要的原因。
        通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。

    索引的缺点
        时间方面：创建索引和维护索引要耗费时间，具体地，当对表中的数据进行增加、删除和修改的时候，索引也要动态的维护，会降低增/改/删的执行效率；
        空间方面：索引需要占物理空间。


**7.索引有哪些类型**

    主键索引: 数据列不允许重复，不允许为NULL，一个表只能有一个主键。

    唯一索引: 数据列不允许重复，允许为NULL值，一个表允许多个列创建唯一索引。

    可以通过 ALTER TABLE table_name ADD UNIQUE (column);创建唯一索引

    可以通过 ```ALTER TABLE table_name ADD UNIQUE (column1,column2);```创建唯一组合索引

    普通索引: 基本的索引类型，没有唯一性的限制，允许为NULL值。

    可以通过`ALTER TABLE table_name ADD INDEX index_name (column);`创建普通索引

    可以通过`ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);`创建组合索引

    全文索引： 是目前搜索引擎使用的一种关键技术。

    可以通过`ALTER TABLE table_name ADD FULLTEXT (column);`创建全文索引


**8.索引的数据结构**

    索引的数据结构和具体存储引擎的实现有关，在MySQL中使用较多的索引有Hash索引，B+树索引等，而我们经常使用的InnoDB存储引擎的默认索引实现为：B+树索引。对于哈希索引来说，底层的数据结构就是哈希表，因此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议选择BTree索引。

    B树索引
        mysql通过存储引擎取数据，基本上90%的人用的就是InnoDB了，按照实现方式分，InnoDB的索引类型目前只有两种：BTREE（B树）索引和HASH索引。B树索引是Mysql数据库中使用最频繁的索引类型，基本所有存储引擎都支持BTree索引。通常我们说的索引不出意外指的就是（B树）索引（实际是用B+树实现的，因为在查看表索引时，mysql一律打印BTREE，所以简称为B树索引）

        查询方式：

            主键索引区:PI(关联保存的时数据的地址)按主键查询,

            普通索引区:si(关联的id的地址,然后再到达上面的地址)。所以按主键查询,速度最快

        B+tree性质：

            1.）n棵子tree的节点包含n个关键字，不用来保存数据而是保存数据的索引。

            2.）所有的叶子结点中包含了全部关键字的信息，及指向含这些关键字记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。

            3.）所有的非终端结点可以看成是索引部分，结点中仅含其子树中的最大（或最小）关键字。

            4.）B+ 树中，数据对象的插入和删除仅在叶节点上进行。

            5.）B+树有2个头指针，一个是树的根节点，一个是最小关键码的叶节点。

    哈希索引

        简要说下，类似于数据结构中简单实现的HASH表（散列表）一样，当我们在mysql中用哈希索引时，主要就是通过Hash算法（常见的Hash算法有直接定址法、平方取中法、折叠法、除数取余法、随机数法），将数据库字段数据转换成定长的Hash值，与这条数据的行指针一并存入Hash表的对应位置；如果发生Hash碰撞（两个不同关键字的Hash值相同），则在对应Hash键下以链表形式存储。

    
**9.索引的原理**

    索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。

    索引的原理很简单，就是把无序的数据变成有序的查询

        1.把创建了索引的列的内容进行排序

        2.对排序结果生成倒排表

        3.在倒排表内容上拼上数据地址链

        4.在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据


**10.索引的算法有哪些**

    BTree算法

        BTree是最常用的mysql数据库索引算法，也是mysql默认的算法。因为它不仅可以被用在=,>,>=,<,<=和between这些比较操作符上，而且还可以用于like操作符，只要它的查询条件是一个不以通配符开头的常量， 例如：

        ```sql
        -- 只要它的查询条件是一个不以通配符开头的常量
        select * from user where name like 'jack%'; 
        -- 如果一通配符开头，或者没有使用常量，则不会使用索引，例如： 
        select * from user where name like '%jack'; 
        ```

    Hash算法

        Hash Hash索引只能用于对等比较，例如=,<=>（相当于=）操作符。由于是一次定位数据，不像BTree索引需要从根节点到枝节点，最后才能访问到页节点这样多次IO访问，所以检索效率远高于BTree索引。



        